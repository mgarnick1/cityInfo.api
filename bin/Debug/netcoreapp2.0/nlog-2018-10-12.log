2018-10-12 21:06:42.4675|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.4-rtm-31024 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2018-10-12 21:06:44.1231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (626ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0
2018-10-12 21:12:25.5018|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:52179/  0
2018-10-12 21:12:25.4823|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 21:12:25.7588|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 377.2315ms 200 
2018-10-12 21:12:25.9658|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 614.1645ms 200 
2018-10-12 21:12:26.1409|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/favicon.ico  
2018-10-12 21:12:26.1741|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 18.2303ms 200 
2018-10-12 21:12:39.3992|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/api/testdatabase application/json 
2018-10-12 21:12:40.8122|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.4-rtm-31024 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2018-10-12 21:12:53.9291|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2,607ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2018-10-12 21:12:54.8346|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (856ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2018-10-12 21:12:55.0202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2018-10-12 21:12:55.1062|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2018-10-12 21:12:55.1248|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2018-10-12 21:12:55.1598|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20181013030644_CityInfoDBInitialMigration'.
2018-10-12 21:12:55.2522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2018-10-12 21:12:55.2660|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2018-10-12 21:12:55.2977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2018-10-12 21:12:55.3430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20181013030644_CityInfoDBInitialMigration', N'2.1.4-rtm-31024');
2018-10-12 21:12:55.3944|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityInfo.API.Controllers.DummyController.TestDatabase (CityInfo.API) with arguments ((null)) - ModelState is Valid
2018-10-12 21:12:55.4319|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 200
2018-10-12 21:12:55.4670|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityInfo.API.Controllers.DummyController.TestDatabase (CityInfo.API) in 15974.3759ms
2018-10-12 21:12:55.4900|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 16083.4755ms 200 
2018-10-12 21:16:46.0442|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.4-rtm-31024 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2018-10-12 21:16:46.5582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2018-10-12 21:16:46.5706|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2018-10-12 21:16:46.6041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2018-10-12 21:16:46.6345|INFO|Microsoft.EntityFrameworkCore.Migrations|No migrations were applied. The database is already up to date.
2018-10-12 21:17:46.1220|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:52179/  0
2018-10-12 21:17:46.1220|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 21:17:46.3240|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 313.2807ms 200 
2018-10-12 21:17:46.5691|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 554.7467ms 200 
2018-10-12 21:17:46.7030|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/favicon.ico  
2018-10-12 21:17:46.7412|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 17.0899ms 200 
2018-10-12 21:17:49.2654|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/api/testdatabase application/json 
2018-10-12 21:17:50.6146|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.4-rtm-31024 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2018-10-12 21:17:51.0707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2018-10-12 21:17:51.0906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2018-10-12 21:17:51.1284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2018-10-12 21:17:51.1837|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20181013031646_CityInfoDBAddPOIDescription'.
2018-10-12 21:17:51.3442|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointsOfInterest] ADD [Description] nvarchar(200) NULL;
2018-10-12 21:17:51.3574|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20181013031646_CityInfoDBAddPOIDescription', N'2.1.4-rtm-31024');
2018-10-12 21:17:51.3881|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityInfo.API.Controllers.DummyController.TestDatabase (CityInfo.API) with arguments ((null)) - ModelState is Valid
2018-10-12 21:17:51.4078|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 200
2018-10-12 21:17:51.4262|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityInfo.API.Controllers.DummyController.TestDatabase (CityInfo.API) in 2055.0221ms
2018-10-12 21:17:51.4658|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 2198.687ms 200 
2018-10-12 21:32:55.8283|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 21:32:55.8283|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:52179/  0
2018-10-12 21:32:55.9621|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 289.5838ms 200 
2018-10-12 21:32:56.1428|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 407.3877ms 200 
2018-10-12 21:32:56.2699|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/favicon.ico  
2018-10-12 21:32:56.3180|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 34.1485ms 200 
2018-10-12 21:38:50.3305|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 21:38:50.4632|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 161.3963ms 200 
2018-10-12 21:56:59.2088|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 21:56:59.4667|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 327.1957ms 200 
2018-10-12 23:22:20.5656|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2018-10-12 23:22:21.3350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (110ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Cities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2018-10-12 23:22:21.3817|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Cities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2018-10-12 23:22:21.3951|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Cities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2018-10-12 23:22:21.4914|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (60ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 200), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Size = 200), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 50), @p11='?' (DbType = Int32), @p12='?' (Size = 200), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 200), @p16='?' (Size = 50), @p17='?' (DbType = Int32), @p18='?' (Size = 200), @p19='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [PointsOfInterest] USING (
VALUES (@p2, @p3, @p4, 0),
(@p5, @p6, @p7, 1),
(@p8, @p9, @p10, 2),
(@p11, @p12, @p13, 3),
(@p14, @p15, @p16, 4),
(@p17, @p18, @p19, 5)) AS i ([CityId], [Description], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CityId], [Description], [Name])
VALUES (i.[CityId], i.[Description], i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [PointsOfInterest] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];
2018-10-12 23:22:22.2377|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/  
2018-10-12 23:22:22.2377|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:52179/  0
2018-10-12 23:22:22.3193|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 191.2069ms 200 
2018-10-12 23:22:22.5165|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 326.0141ms 200 
2018-10-12 23:22:22.6275|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:52179/favicon.ico  
2018-10-12 23:22:22.6529|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 20.3904ms 200 
